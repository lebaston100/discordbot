<html>
<head>

<style>
div {
	padding:10px;
}
body {
	font-family: verdana, tahoma, arial;
	margin:10px;
	background: #0021;
}

div:nth-child(even) {
  background: #0001;
}

.entry {
	display:block;
}
.content {
	display:inline-block;
}
.name {
	display:inline-block;
	font-weight: bold;
}
.time {
	display: inline-block;
    font-style: italic;
    font-size: 11px;
    position: relative;
    top: -1px;
}
div:empty {
	display:none;
}
</style>
</head>
<body>
<div id="main">
<h1>#Updates from Discord.VDO.Ninja
</div>
<script>

function timeSince(date) {

  var seconds = Math.floor((new Date() - date) / 1000);

  var interval = seconds / 31536000;

  if (interval > 1) {
    return Math.floor(interval) + " years";
  }
  interval = seconds / 2592000;
  if (interval > 1) {
    return Math.floor(interval) + " months";
  }
  interval = seconds / 86400;
  if (interval > 1) {
    return Math.floor(interval) + " days";
  }
  interval = seconds / 3600;
  if (interval > 1) {
    return Math.floor(interval) + " hours";
  }
  interval = seconds / 60;
  if (interval > 1) {
    return Math.floor(interval) + " minutes";
  }
  return Math.floor(seconds) + " seconds";
}


var data = fetch("https://gist.githubusercontent.com/steveseguin/274f00dc5667f7c9bfa782503942744b/raw/updates.json").then((response) => response.json())
	.then((data) => {
		data.reverse();
		data.forEach(i=>{
			var ele = document.createElement("div");
			ele.className = "entry";
			console.log(i);
			var message = i[Object.keys(i)[0]];
			console.log(message);
			
			var formattedTime = "";
			if (message.timestamp){
				formattedTime = timeSince(parseInt(message.timestamp)*1000);
				var time = document.createElement("div");
				time.className = "time";
				time.innerText = formattedTime +  " ago";
				ele.appendChild(time);
			}
			var name = document.createElement("div");
			name.innerText =  message.name;
			name.className = "name";
			var content = document.createElement("div");
			content.innerText =  message.content;
			content.className = "content";
			
			ele.appendChild(name);
			ele.appendChild(content);
			document.getElementById("main").appendChild(ele);
			
		});
	});
</script>
</body>
</html>
